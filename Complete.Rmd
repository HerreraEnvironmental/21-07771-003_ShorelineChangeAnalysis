---
title: 'NANOOS Profiles: SCA Shoreline Characterization'
author: "Regina Lionheart"
date: "2023-03-01"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Shoreline profiles in x y z format (easting northing elevation).
Named prof_X_ttYY.out where X is the profile number, tt is a season code (e.g. f = fall) and YY is the year.
The vertical datum is NAVD88.
The horizontal is WA State Plane South. All of the units are in meters.

Quite a few profiles are null and will be removed and noted.
Removed two duplicates from original set: see accompanying script "duplicate_test.R"
Check on non-conforming files: beachface? dunes?

Load packages
```{r prep, echo=FALSE}
source("scripts/src/load_packages.R")
```

## Explore profiles
```{r prep, echo=FALSE}

source("scripts/examine_profiles.R")
```


## View profiles and their locations
```{r prep, echo=FALSE}
kable(complete.geo.profiles, caption = "Profiles with matching geographic location")
```

## View individual profile and year.
Select a profile of interest by entering "prof_N" below. 

Select a year of interest by entering the last two digits of the year (from 98 to 18).
```{r prep, echo=FALSE}
profile.pattern <- "prof_16|prof_17"
year.pattern <- c("98", "18")

source("scripts/src/import_profiles.R")
```

Visualize the single profile/year.
```{r, echo=FALSE}
source("scripts/single_profile_3D.R")
profileplot
```


Import data for all years, single profile.
```{r, echo=FALSE}
profile.pattern <- "prof_17|prof_16"
source("scripts/src/import_profiles.R")
```

Create visual for complete profile, all years. Horizontal plane is the MHHW mark. 
```{r, echo=FALSE}
source("scripts/complete_profile_plane.R")
complete.profile.plot
```

## BasePoint and Euclidean distance

Import a selection of profiles, all years. The more you select, the longer this will take.
```{r, echo=FALSE}
profile.pattern <- "prof_6|prof_7|prof_16|prof_17|prof_22|prof_41"
source("scripts/src/import_profiles.R")
```
Take a preliminary look at the profiles compared to the BasePoint as a 2D reference for Euclidean distance change. 

```{r, echo=FALSE}
source("scripts/profiles_and_BasePoint.R")
all.basepoint.plot
single.basepoint.plot
```
Find the midpoint of each profile. See where it is migrating with time.
```{r, echo=FALSE}
source("scripts/midpoint_euclidean_distance.R")
midpoint.euc.dist.plot
```


## Linear Regressions and Change Rates

Take linear regressions for only xy data

Look at a single profile and year to see the linear regression
```{r, echo=FALSE}
profile.pattern <- "prof_21"
year.pattern <- "00"
source("scripts/src/import_profiles.R")
```

```{r, echo=FALSE}
source("scripts/single_linear_reg.R")
single.linear
```

Add quartiles along the plot for data description.
```{r, echo=FALSE}
source("scripts/single_quartiles.R")
single.quartiles.plot
```


```{r, echo=FALSE}
source("scripts/quartile_ROC.R")
quartile.ROC.plot
```

Visualize where the profiles cross the MHHW mark. 
```{r, echo=FALSE}
source("scripts/MHHW_to_BP.R")
MHHW.to.BasePoint
```

How do those points change with time?
```{r, echo=FALSE}
source("scripts/MHHW_ROC.R")
MHHW.ROC.plot
```